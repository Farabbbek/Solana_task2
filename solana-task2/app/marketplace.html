<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè™ Music NFT</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/rarity.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-music"></i>
                <span>Music NFT</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="create.html" class="nav-link">–°–æ–∑–¥–∞—Ç—å NFT</a>
                <a href="packs.html" class="nav-link">–ü–∞–∫–∏</a>
                <a href="marketplace.html" class="nav-link active">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
                <a href="gallery.html" class="nav-link">–ì–∞–ª–µ—Ä–µ—è</a>
            </div>
            <div class="wallet-section">
                <button id="connect-wallet" class="wallet-btn">
                    <i class="fas fa-wallet"></i>
                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
                </button>
                <div id="wallet-info" class="wallet-info" style="display: none;">
                    <span id="wallet-address"></span>
                    <button id="disconnect-wallet" class="disconnect-btn">√ó</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="marketplace-page">
        <div class="container">
            <div class="page-header">
                <h1><i class="fas fa-store"></i> –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h1>
                <p>–ü–æ–∫—É–ø–∞–π –∏ –ø—Ä–æ–¥–∞–≤–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ NFT</p>
            </div>

            <div class="marketplace-controls">
                <div class="filters">
                    <select id="rarity-filter">
                        <option value="">–í—Å–µ —Ä–µ–¥–∫–æ—Å—Ç–∏</option>
                        <option value="Common">–û–±—ã—á–Ω—ã–π</option>
                        <option value="Rare">–†–µ–¥–∫–∏–π</option>
                        <option value="Epic">–≠–ø–∏—á–µ—Å–∫–∏–π</option>
                        <option value="Legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</option>
                        <option value="Mythic">–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π</option>
                    </select>

                    <select id="sort-filter">
                        <option value="price-low">–¶–µ–Ω–∞:–Ω–∏–∑–∫–∞—è ‚Üí –≤—ã—Å–æ–∫–∞—è</option>
                        <option value="price-high">–¶–µ–Ω–∞:–≤—ã—Å–æ–∫–∞—è ‚Üí –Ω–∏–∑–∫–∞—è</option>
                        <option value="rarity">–ü–æ —Ä–µ–¥–∫–æ—Å—Ç–∏</option>
                        <option value="newest">–ù–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ</option>
                    </select>

                    <div class="price-range">
                        <input type="number" id="min-price" placeholder="–ú–∏–Ω. —Ü–µ–Ω–∞" step="0.001">
                        <span>‚Äî</span>
                        <input type="number" id="max-price" placeholder="–ú–∞–∫—Å. —Ü–µ–Ω–∞" step="0.001">
                        <span>SOL</span>
                    </div>
                </div>

                <div class="view-controls">
                    <button class="btn btn-secondary" onclick="showMyListings()">
                        <i class="fas fa-list"></i>
                        –ú–æ–∏ –ª–æ—Ç—ã
                    </button>
                    <button class="btn btn-primary" onclick="showSellModal()">
                        <i class="fas fa-plus"></i>
                        –í—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
                    </button>
                </div>
            </div>

            <div class="marketplace-stats">
                <div class="stat">
                    <span id="total-listings">0</span>
                    <small>–ê–∫—Ç–∏–≤–Ω—ã—Ö –ª–æ—Ç–æ–≤</small>
                </div>
                <div class="stat">
                    <span id="floor-price">0.000</span>
                    <small>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (SOL)</small>
                </div>
                <div class="stat">
                    <span id="volume-24h">0.000</span>
                    <small>–û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤ –∑–∞ 24—á</small>
                </div>
            </div>

            <div id="marketplace-grid" class="nfts-grid">
                <!-- –õ–æ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                <div class="loading-placeholder">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ—Ç–æ–≤...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Buy NFT Modal -->
    <div id="buy-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> –ö—É–ø–∏—Ç—å NFT</h3>
                <button onclick="closeBuyModal()" class="close-btn">√ó</button>
            </div>
            <div class="nft-buy-info">
                <div class="nft-preview" id="buy-nft-preview">
                    <!-- NFT preview -->
                </div>
                <div class="buy-details">
                    <div class="price-info">
                        <h4>–¶–µ–Ω–∞</h4>
                        <div class="price" id="buy-price">0.000 SOL</div>
                    </div>
                    <div class="seller-info">
                        <h4>–ü—Ä–æ–¥–∞–≤–µ—Ü</h4>
                        <div class="seller" id="buy-seller">Unknown</div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="confirmPurchase()">
                    <i class="fas fa-check"></i>
                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–∫—É–ø–∫—É
                </button>
                <button class="btn btn-secondary" onclick="closeBuyModal()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- Sell NFT Modal -->
    <div id="sell-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-tag"></i> –í—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É</h3>
                <button onclick="closeSellModal()" class="close-btn">√ó</button>
            </div>
            <div class="sell-form">
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ NFT –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:</label>
                    <div id="my-nfts-grid" class="my-nfts-grid">
                        <!-- User's NFTs -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="sell-price">–¶–µ–Ω–∞ (SOL):</label>
                    <input type="number" id="sell-price" step="0.001" min="0.001" placeholder="0.100">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="instant-sell">
                        –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ (–±–µ–∑ –∞—É–∫—Ü–∏–æ–Ω–∞)
                    </label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="confirmListing()">
                    <i class="fas fa-gavel"></i>
                    –í—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
                </button>
                <button class="btn btn-secondary" onclick="closeSellModal()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/rarity-manager.js"></script>
    <script src="js/pack-manager.js"></script>
    <script src="js/marketplace.js"></script>
</body>

</html>